# 회의록 받아쓰기 앱 (Whisper.cpp 기반)

**Whisper.cpp**를 사용한 온디바이스 AI 기반 음성인식 회의록 받아쓰기 앱입니다.

## Whisper.cpp란?

OpenAI의 Whisper 모델을 C++로 최적화하여 포팅한 버전으로, 다음과 같은 장점이 있습니다:

- ✅ **완전한 오프라인**: 네트워크 없이 100% 온디바이스에서 작동
- ✅ **높은 정확도**: OpenAI Whisper 모델의 정확도를 그대로 유지
- ✅ **다국어 지원**: 99개 언어 지원 (한국어 포함)
- ✅ **타임스탬프**: 정확한 시간 정보 제공
- ✅ **경량화**: 모바일 기기에서도 실행 가능

## 주요 기능

### 1. Whisper AI 음성 인식
- **온디바이스 AI 처리**: 음성 데이터가 외부로 전송되지 않음
- **높은 정확도**: 기존 음성 인식 대비 월등한 품질
- **다국어 지원**: 한국어, 영어 등 99개 언어
- **배경 소음 제거**: 잡음이 있는 환경에서도 정확한 인식

### 2. 모델 선택
앱은 여러 Whisper 모델을 지원합니다:

| 모델 | 크기 | 속도 | 정확도 | 권장 환경 |
|------|------|------|--------|-----------|
| **Tiny** | 75 MB | 매우 빠름 | 기본 | 저사양 기기, 빠른 처리 필요시 |
| **Base** | 142 MB | 빠름 | 좋음 | **대부분의 경우 권장** |
| **Small** | 466 MB | 보통 | 매우 좋음 | 정확도 중요시 |
| **Medium** | 1.5 GB | 느림 | 최고 | 고사양 기기, 최고 품질 |

### 3. 사용 방식 차이

#### 기존 방식 (speech_to_text)
- 실시간 스트리밍 방식
- 플랫폼 API 의존 (클라우드 연결 가능)
- 정확도가 낮을 수 있음

#### Whisper 방식 (whisper.cpp)
- **녹음 → 처리 방식**
  1. 녹음 버튼을 눌러 녹음 시작
  2. 다시 버튼을 눌러 녹음 중지
  3. Whisper AI가 음성을 텍스트로 변환 (수 초 소요)
  4. 변환된 텍스트가 세그먼트로 추가됨
- 완전한 오프라인 처리
- 월등히 높은 정확도

### 4. 화자 구분
- 다중 화자 지원 (기본 3명, 추가 가능)
- 수동 화자 전환 (녹음 전 선택)
- 화자별 색상 구분

### 5. 기타 기능
- **로컬 저장**: SQLite 데이터베이스
- **구글 드라이브 연동**: 클라우드 백업
- **다양한 포맷**: 텍스트, Markdown, JSON 등
- **공유 및 복사**: 다른 앱으로 공유 가능

## 시작하기

### 1. 의존성 설치

```bash
flutter pub get
```

### 2. Whisper 모델 다운로드

앱을 처음 실행하면 Whisper 모델이 필요합니다. 다음 중 하나를 선택하세요:

#### 옵션 A: 자동 다운로드 (권장)
1. 앱 실행
2. "모델 다운로드" 버튼 클릭
3. **Base** 모델 선택 (142 MB)
4. 다운로드 완료 대기

#### 옵션 B: 수동 다운로드
1. [Whisper.cpp 모델](https://huggingface.co/ggerganov/whisper.cpp/tree/main)에서 다운로드
2. 권장: `ggml-base.bin` (142 MB)
3. 앱의 문서 디렉토리에 저장:
   ```
   <앱_문서_디렉토리>/models/ggml-base.bin
   ```

### 3. 실행

```bash
# Android
flutter run

# iOS
flutter run
```

## 사용 방법

### 회의록 녹음

1. **새 회의록 시작**
   - 홈 화면에서 "새 회의록" 버튼 탭
   - 회의록 제목 입력

2. **화자 선택**
   - 현재 말할 사람의 화자 칩을 선택
   - 필요시 화자 이름 수정 가능

3. **녹음하기**
   - 🎤 버튼을 눌러 녹음 시작
   - 발화가 끝나면 ⏹️ 버튼을 눌러 녹음 중지
   - Whisper AI가 음성을 텍스트로 변환 (수 초 소요)
   - 변환된 텍스트가 자동으로 추가됨

4. **화자 전환**
   - 다음 발화자가 말하기 전에
   - 화자 칩을 탭하여 전환
   - 또는 👥 버튼으로 순환 전환

5. **저장**
   - 💾 버튼을 눌러 회의록 저장

### 회의록 관리

- **보기**: 목록에서 회의록 탭
- **공유**: 공유 버튼으로 텍스트 공유
- **복사**: 클립보드로 복사
- **포맷**: 다양한 형식으로 변환
- **드라이브**: 구글 드라이브에 백업

## 기술 스택

### 핵심 기술
- **Flutter**: 크로스 플랫폼 UI
- **Whisper.cpp**: 온디바이스 AI 음성 인식
- **SQLite**: 로컬 데이터베이스

### 패키지
```yaml
dependencies:
  whisper_flutter: ^1.0.1  # Whisper.cpp Flutter 바인딩
  record: ^5.0.4           # 오디오 녹음
  sqflite: ^2.3.2          # 로컬 DB
  google_sign_in: ^6.2.1   # 구글 인증
  googleapis: ^13.1.0      # 구글 드라이브
  path_provider: ^2.1.2    # 파일 시스템
  share_plus: ^7.2.2       # 공유 기능
```

## 성능 최적화

### 모델 선택 가이드

#### 저사양 기기 (2GB RAM 이하)
- **Tiny** 모델 사용
- 빠른 처리 속도
- 기본적인 정확도

#### 일반 기기 (2-4GB RAM)
- **Base** 모델 사용 (권장)
- 균형잡힌 속도와 정확도
- 대부분의 경우 충분

#### 고사양 기기 (4GB RAM 이상)
- **Small** 모델 사용
- 높은 정확도
- 약간 느린 처리 속도

### 녹음 팁

1. **조용한 환경**: 배경 소음을 최소화하세요
2. **명확한 발음**: 또렷하게 말하세요
3. **적절한 길이**: 한 번에 10-30초 정도 녹음이 최적
4. **마이크 거리**: 30cm 이내가 좋습니다

## 제한 사항

### Whisper의 특성
- **실시간이 아님**: 녹음 후 처리 방식
- **처리 시간 필요**: 10초 녹음 → 2-5초 처리 시간
- **긴 녹음 주의**: 1분 이상 녹음은 처리가 오래 걸림

### 화자 구분
- Whisper는 자동 화자 구분 기능이 없음
- 수동으로 화자를 전환해야 함
- 각 발화마다 화자를 지정

## 비교: speech_to_text vs Whisper.cpp

| 항목 | speech_to_text | **Whisper.cpp** |
|------|----------------|-----------------|
| 정확도 | 중간 | **매우 높음** |
| 오프라인 | 제한적 | **완전함** |
| 속도 | 실시간 | 녹음 후 처리 |
| 프라이버시 | 클라우드 가능 | **100% 로컬** |
| 다국어 | 제한적 | **99개 언어** |
| 잡음 처리 | 약함 | **강함** |
| 모델 크기 | 없음 | 75MB ~ 1.5GB |

## 문제 해결

### "모델을 찾을 수 없습니다"
- 모델을 다운로드했는지 확인
- 앱 권한(저장소) 확인
- 모델 파일 경로 확인

### 음성 인식이 느림
- 더 작은 모델 사용 (Base → Tiny)
- 녹음 길이를 짧게 (10-20초)
- 백그라운드 앱 종료

### 정확도가 낮음
- 더 큰 모델 사용 (Base → Small)
- 조용한 환경에서 녹음
- 명확하게 발음

### 앱이 느려짐
- 모델을 Base 또는 Tiny로 변경
- 오래된 회의록 삭제
- 앱 재시작

## 향후 개선 사항

- [ ] 실시간 스트리밍 모드 (Whisper streaming)
- [ ] 자동 화자 구분 (pyannote.audio 통합)
- [ ] 회의록 자동 요약 (LLM 통합)
- [ ] 더 많은 언어 지원
- [ ] 배경 소음 필터링 강화
- [ ] 모델 압축 (양자화)

## 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

Whisper.cpp는 MIT 라이선스입니다.

## 참고 자료

- [Whisper.cpp GitHub](https://github.com/ggerganov/whisper.cpp)
- [OpenAI Whisper](https://github.com/openai/whisper)
- [whisper_flutter](https://pub.dev/packages/whisper_flutter)

## 문의

문제가 있거나 질문이 있으시면 이슈를 등록해주세요.
